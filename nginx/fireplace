# Change this to update where your fireplace is running.
upstream fireplace {
    server localhost:8675;
}

server {

    # Listening on port 80 is nice but you have to start nginx
    # with the right permissions.
    listen       80 default;

    # Set a host name. You also have to alias this host to
    # 127.0.0.1 in /etc/hosts
    server_name  fireplace;

    location /developers/ {
        return 301 $scheme://zamboni.jaredkerim.com$request_uri;
    }

    location / {
        # Default to fireplace.
        proxy_pass http://fireplace;
        proxy_set_header Host $host;

        auth_basic "Restricted";
        auth_basic_user_file /home/ubuntu/config/nginx/.htpasswd;
    }
}
